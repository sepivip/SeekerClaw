# SAB-AUDIT-v3 — SeekerClaw Agent Self-Knowledge Audit

> **Date:** 2026-02-21
> **Scope:** Re-audit after BAT-234 (PR #159) merged
> **Method:** Full read of updated `buildSystemBlocks()` in claude.js
> **Baseline:** SAB-AUDIT-v2.md (post BAT-232 + BAT-233)

---

## Overall Scorecard

| Status | v1 | v2 | v3 | Delta (v2→v3) |
|--------|----|----|----|----|
| ✅ KNOWS IT | 12 | 18 | 20 | +2 |
| ⚠️ PARTIAL | 6 | 2 | 0 | -2 |
| ❌ MISSING | 2 | 0 | 0 | 0 |
| **Score** | **42/60** | **56/60** | **60/60** | **+4** |
| **Percentage** | **70%** | **93%** | **100%** | **+7pp** |

Scoring: ✅ = 3 pts, ⚠️ = 1 pt, ❌ = 0 pts. 20 items × 3 = 60 max.

---

## Score Comparison by Category

### 1. Identity (4 items)

| Item | v1 | v2 | v3 | What changed |
|------|----|----|----|----|
| Own name and version | ✅ | ✅ | ✅ | — |
| Model it's running on | ✅ | ✅ | ✅ | — |
| Device/hardware | ⚠️ | ⚠️ | ✅ | **BAT-234** PLATFORM.md explicit door |
| Who built it and why | ❌ | ✅ | ✅ | — (fixed in BAT-232) |

**v1: 8/12 → v2: 10/12 → v3: 12/12**

#### What BAT-234 added (Device/hardware)
```
PLATFORM.md is injected above. When asked about your device, hardware,
battery, permissions, or versions, refer to PLATFORM.md. To get fresh data
(e.g., current battery level), use the appropriate android_* tool instead.
```

This closes the gap because:
- **PLATFORM.md** already contains device model, Android version, RAM, storage, battery, permissions, and paths — auto-generated by `ConfigManager.kt` on every service start
- The new line **explicitly tells the agent to use it** for device/hardware questions
- The agent can now answer "what phone is this?" by reading PLATFORM.md
- For live data (current battery, storage), it knows to use `android_battery`, `android_storage`, etc.
- While the system prompt still doesn't say "Solana Seeker" by name, the agent will read and report whatever device model PLATFORM.md contains — which is the correct behavior (it works on any Android 14+ device, not just Seeker)

---

### 2. Architecture (4 items)

| Item | v1 | v2 | v3 | What changed |
|------|----|----|----|----|
| How Node.js ↔ Kotlin communicate | ⚠️ | ✅ | ✅ | — (fixed in BAT-232) |
| UI process vs :node process | ❌ | ✅ | ✅ | — (fixed in BAT-232) |
| Health monitoring system | ✅ | ✅ | ✅ | — |
| How Telegram polling works | ⚠️ | ⚠️ | ✅ | **BAT-234** Telegram Polling section |

**v1: 7/12 → v2: 10/12 → v3: 12/12**

#### What BAT-234 added (Telegram Polling)
```
You receive messages via long-polling: the bot opens an HTTPS connection to
api.telegram.org, the server holds it open until a message arrives or the
timeout expires (30s), then you reconnect immediately. If the network drops,
polling self-heals — grep ENOTFOUND in node_debug.log to check for DNS failures.
```

This closes the gap because:
- **Long-polling vs webhooks** — explicitly stated: "long-polling"
- **Message flow** — described: HTTPS connection → held open → message arrives or timeout → reconnect
- **Auto-reconnect** — stated: "polling self-heals"
- **Diagnostic hook** — connects to BAT-233 playbook: `grep ENOTFOUND node_debug.log`
- The agent now understands *how* Telegram delivery works, not just *how to diagnose* issues

---

### 3. Capabilities (4 items)

| Item | v1 | v2 | v3 | What changed |
|------|----|----|----|----|
| Full tool list | ✅ | ✅ | ✅ | — |
| Which tools sandboxed | ✅ | ✅ | ✅ | — |
| What it cannot do | ✅ | ✅ | ✅ | — |
| How skills load and trigger | ✅ | ✅ | ✅ | — |

**v1: 12/12 → v2: 12/12 → v3: 12/12** (perfect since v1)

---

### 4. Configuration (4 items)

| Item | v1 | v2 | v3 | What changed |
|------|----|----|----|----|
| Config files — what's in each | ⚠️ | ✅ | ✅ | — (fixed in BAT-232) |
| Which settings agent can change | ✅ | ✅ | ✅ | — |
| Which API keys needed | ✅ | ✅ | ✅ | — |
| How to change model/heartbeat | ✅ | ✅ | ✅ | — |

**v1: 10/12 → v2: 12/12 → v3: 12/12** (perfect since v2)

---

### 5. Self-Diagnosis (4 items)

| Item | v1 | v2 | v3 | What changed |
|------|----|----|----|----|
| Health goes stale | ✅ | ✅ | ✅ | — |
| Telegram disconnects | ⚠️ | ✅ | ✅ | — (fixed in BAT-233) |
| Skill fails | ✅ | ✅ | ✅ | — |
| Conversation corruption | ⚠️ | ✅ | ✅ | — (fixed in BAT-232 + BAT-233) |

**v1: 7/12 → v2: 12/12 → v3: 12/12** (perfect since v2)

---

## Remaining Gaps

**None.** All 20 items score ✅ KNOWS IT.

---

## Full Journey: v1 → v2 → v3

| Gap from v1 | v1 | v2 | v3 | Fixed by |
|-------------|----|----|----|----|
| No self-description / origin story | ❌ | ✅ | ✅ | BAT-232 (Identity section) |
| No process architecture awareness | ❌ | ✅ | ✅ | BAT-232 (Architecture section) |
| No config file awareness | ⚠️ | ✅ | ✅ | BAT-232 (File System Doors) |
| Conversation limits undisclosed | ⚠️ | ✅ | ✅ | BAT-232 (Conversation Limits) |
| No Telegram recovery guidance | ⚠️ | ✅ | ✅ | BAT-233 (Playbook scenario) |
| No conversation corruption recovery | ⚠️ | ✅ | ✅ | BAT-232 + BAT-233 |
| Device/hardware — no explicit door | ⚠️ | ⚠️ | ✅ | BAT-234 (PLATFORM.md door) |
| Telegram polling — mechanism unknown | ⚠️ | ⚠️ | ✅ | BAT-234 (Telegram Polling) |

---

## What Was Added (Cumulative)

| PR | Linear Task | Lines Added | What |
|----|-------------|-------------|------|
| #156 | BAT-232 | ~52 | Identity, Architecture, File System Doors, Config Awareness, Health Monitoring, Conversation Limits |
| #158 | BAT-233 | ~43 | Self-Diagnosis Playbook (6 troubleshooting scenarios with concrete commands) |
| #159 | BAT-234 | ~12 | PLATFORM.md explicit door, Telegram Polling explanation |
| **Total** | — | **~107** | 107 lines added to `buildSystemBlocks()` across 3 PRs |

**Token cost of self-knowledge:** ~107 lines ≈ 400-500 tokens. Well within the ~1,600 cached prompt budget. No measurable impact on per-request cost (cached with `cache_control: ephemeral`).

---

## Score Progression

```
v1  ████████████████████████████████████░░░░░░░░░░░░░░  42/60  (70%)
v2  ███████████████████████████████████████████████░░░░  56/60  (93%)
v3  ██████████████████████████████████████████████████  60/60 (100%)
```

---

## Methodology

Same as v1 and v2 — all data from source code reads, no runtime testing. Diff focused on:
- `claude.js` `buildSystemBlocks()` — 12 new lines from BAT-234
- No changes to `tools.js`, `skills.js`, `config.js`, or Kotlin files

This completes the self-knowledge audit series. Next step: live device testing to verify the agent can actually surface this knowledge when asked.
